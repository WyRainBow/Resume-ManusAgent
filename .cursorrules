# OpenManus 开发指南

## 核心设计原则

### 1. 提示词设计：简洁高效
- 系统提示词（如 `manus.py` 的 SYSTEM_PROMPT）可以稍长，定义框架和原则
- 场景化提示词保持简洁高效
- 使用 `PromptTemplate` 支持变量插值和验证
- 使用 `partial()` 预填充常用值

### 2. 引导性对话：原则而非脚本

**核心原则**：引导性对话不是"写死的对话模板"，而是一套交互原则。

**五大原则**：
1. **主动引导** - 不等用户问，主动提出下一步建议
2. **方案提案** - 分析后提出具体方案，说明价值，按优先级排列
3. **逐项确认** - 修改前征求同意，需要信息时降低门槛
4. **流程预告** - 完成后预告下一步
5. **具体化** - 避免模糊，说清楚要修改什么

| 写死的脚本（错误） | 引导性原则（正确） |
|-------------------|------------------|
| 固定说"请告诉我您的需求..." | 根据用户状态判断是否需要开场引导 |
| 固定说"接下来，我们先从...开始" | 分析当前情况，主动提出最合理的下一步 |
| 机械地每次都问"您同意吗？" | 在需要确认的关键节点才询问 |

### 3. 代码简洁性
- 移除冗余代码，避免重复实现
- 统一使用 `ResumeDataStore` 管理简历数据
- 删除注释掉的无用代码

## 项目结构

```
app/
├── agent/          # Agent 实现
├── prompt/         # 提示词模块
├── tool/           # 工具模块
├── memory/         # 记忆系统
├── llm.py          # LLM 客户端
└── config.py       # 配置

docs/
├── 引导性对话设计.md
├── 提示词系统优化.md
└── 模块分析工具*.md
```

## 重要提示
- 提示词使用中文时，确保 LLM 的 working language 设置为 Chinese
- 所有与用户的交互使用第一人称"您/你的"
- 分析完成后要给出明确的下一步建议
