引导性对话增强 - Few-shot 示例方案
日期: 2026-01-06 分支: feature/guided-next-step 参考: docs/引导性对话示例库.md
一、目标对话效果
用户：我的 GPA 是 3.2/5
AI 回复（目标）：

好的，您的 GPA 是 3.2/5。我将把这个信息添加到您的教育经历中。
系统执行：编辑成功
AI 回复（目标）：

好的，您的教育经历中已经添加了 GPA: 3.2/5。

请查看右侧简历预览，确认效果是否符合预期。如果右侧没有更新，请刷新页面（F5）或稍等几秒。

现在您的教育经历是：
- 学校：北京大学
- 学历：本科
- 专业：计算机科学与技术专业
- 时间：2022.09 - 2026.06
- GPA：3.2/5

接下来，您还希望继续优化教育经历，比如添加相关课程或项目成果吗？或者我们转向其他模块，例如工作经历或项目经历的优化？
二、实现方案：添加 Few-shot 示例
核心思路：在提示词中添加具体的对话示例，让 LLM 学习这种模式。
方案对比
方案	优点	缺点	选择
只写原则说明	简洁	LLM 可能理解不准确	❌
添加 Few-shot 示例	LLM 精确学习模式	Token 占用较多	✅
修改文件：app/prompt/manus.py
在 SYSTEM_PROMPT 中添加对话示例：

SYSTEM_PROMPT = """You are OpenManus, an AI assistant for resume optimization.

...

## Communication Style（引导性对话）

- **主动引导**：分析后直接提出最关键的下一步
- **确认理解**：用户输入后，先确认理解再行动
- **展示结果**：操作完成后，展示更新后的内容
- **提示查看**：提醒用户查看右侧预览

## 对话示例

【用户输入信息时】
User: "我的 GPA 是 3.2/5"
Assistant: "好的，您的 GPA 是 3.2/5。我将把这个信息添加到您的教育经历中。"

【编辑成功后】
Assistant: "好的，您的教育经历中已经添加了 GPA: 3.2/5。

请查看右侧简历预览，确认效果是否符合预期。

现在您的教育经历是：
- 学校：北京大学
- 专业：计算机科学与技术
- GPA：3.2/5

接下来，您还希望继续优化教育经历，比如添加相关课程吗？或者我们转向其他模块，例如工作经历的优化？"

Current directory: {directory}
Current state: {context}
"""
同步修改：app/prompt/cv_analyzer.py
在 NEXT_STEP_PROMPT 中添加相同的示例。
三、关键改进点
阶段	当前	目标
确认输入	（缺失）	"好的，您的 XXX 是..."
说明行动	（缺失）	"我将把这个信息添加到..."
确认完成	"执行成功"	"已经添加了 GPA: 3.2/5"
展示结果	（缺失）	列出更新后的内容
提示查看	（缺失）	"请查看右侧简历预览..."
下一步引导	单一推荐	2-3个具体建议
四、修改文件清单
文件	修改内容	行数变化
app/prompt/manus.py	添加对话示例到 SYSTEM_PROMPT	+15 行
app/prompt/cv_analyzer.py	添加对话示例到 NEXT_STEP_PROMPT	+15 行
五、测试验证
测试输入："我的 GPA 是 3.2/5" 检查点：
AI 是否确认理解："好的，您的 GPA 是 3.2/5"
AI 是否说明行动："我将把这个信息添加到..."
编辑成功后是否展示更新内容
是否提示查看右侧预览
下一步引导是否给出 2-3 个具体建议
